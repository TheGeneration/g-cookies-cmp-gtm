___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "G-Cookies CMP",
  "categories": ["TAG_MANAGEMENT"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAQs0lEQVR4nOzdC7iOVf7/8bfaDlHalcMUirRpduU0gw7TXzUVZXT4O5Sf44hpHIYkFTKj+jk0VKMcasgQg4aERkohJmcamU1KFNqFHe0dxd7s7XetWZlktrWfZz/PWve6n+f7uq6urjG7tRaez3Ovda9TynEa/wWojhDiVNkpQEPgiqBbIoSHss4IugVC+EwCIoSBBEQIAwmIEAYSECEMJCBCGEhAhDCQgAhhIAERwkACIoSBBEQIAwmIEAYSECEMJCBCGEhAhDCQgAhhIAERwkACIoSBBEQIAwmIEAYSECEMJCBCGEhAhDCQgAhhIAERwkACIoSBBEQIAwmIEAYSECEMJCBCGEhAhDCQgAhhIAERwkACIoSBBEQIAwmIEAYpQTdAAKlnQ+o5P/61vKPwxVdBtUh8TwJi20UV4PLqULMKpFWDmlWh8vn6nwrn/ncwTpWbB1/lwIEcHZhde2HbLvh4N2z/HD7aBUePufrdJJ0Sx2mcIddAx8k5ZeHqK+GGBtCgNtSvrYNgkwpQxg74YBss3whrMnRojh+3W29yyJKAxKrOZXD3DXDH9ToUPth7ABauglmLYcl6OJIXdIvCSgJSbO2bQb//gXq1gm6JmQrHS/Ph93+GA98E3ZqwkYBERY0lOjSDljdC7UuCbk10Dn4Hi9bAjEUwdxnkFwTdojCQgESkSX3o3x6aXxd0S+Ljsy9h5DSYvAC+OxJ0a3wmATFKrwFj++tBdyLKPggPPAtT3gi6Jb6SgBSqYir0uRceuAfKnRV0a+x7Zx38car+t7z9OpkE5EfKl4PHu0GPVlAqCaeI1mRAz1GwYWvQLfGFBOTfSpeE++6AgZ2hSsWgWxOsY/nw2rsw6AXYtjvo1gRNAkKZUrDwT4k7ziiub76FW3vDms1BtyRIWcm9WLHWxbBqooSjMKq7uXgMtL4p6JYEKjkDorpUj3SE9ZP9n+gLUrmzdLcziSXhSBT46xN6sk8Ube2WoFsQqOR6gpQtA9MlHBHLOQRPTgq6FYFKnifI1VfC7OHylioa/UbD5/uCbkWgkiMgF1WAhc8WvfdC/GDzDnjp9aBbEbjE72KpcCx6TsIRrQdHB90CLyT2E0SF450x8NPqQbckXHqO1Ct/RQI/Qa69CjbPkHBEa+J8GPdq0K3wRmIG5Jyy8Ldh0q2K1pFcGDgu6FZ4JfECcsYZMGGAvK0qjhFTISs76FZ4JbHGIGVKw4wn4K4mQbckfN5cBcMmB90K7yRWQB5q5384Dn4La7bA+g9h3RbYkQmZWf/9zV22DFQ6Dy6tAlfV1PM4DdP18UHxtu9raD1Qjg8qROKs5k2vAWsn+bfBKfsgvPs+rNyk/71xW2wfxKqV4P/V04Fp0kCfqhKrrkNlzqNwCbLcXX3brpoYnw9LPOw9APOXw9zl8PZau9/MtS+GZtdAy5vg+rrR//dvrYZmD9hoWSJIgICoccfSsfobNUgFBbBik/4mnrkIco+6b0PdNOh4G7S/TXfPiqK6Vj/rlPTLSQwSICAPtoWn+wTbBtWNavcHeGNlsO04IfVs/Zr7lkbmn7uxh+72idMJ+Yap886B/h2CbcMr78BV7fwJh5J9CJr2gd8Mh917C/+ZifMlHBEId0CGdoefWD779nSWrNfdk3sf87OLcvw4TJgH1e+GB/8Eh3N/+P9UaPrJWqtIhDcglc+H39wVTN2zFsMtveH9j4KpPxpqbPTsTPhVPzj0nf61IRP1nnNRpPDOgzzaEc50nO+D38HgF/VapYKQHd2pnnjpbaF+LX2wtYhIOANSLw26/3+3dWZmQbM++qqBsFJdq9ONSUShwhmQvwyG0qXc1XckVx+Bs+VTd3UKL4RvDNLsarcnkahw3DtYwpGkwvcEeaSju7pUt+rmXrB1p7s6hVfC9QRRA0xXh7zlHNJjDglHUgtXQNo1c1fXYy+Ge0Au4iI8ASmZAm1+6aaumW/Di6+5qUt4LTxjkG53QrXK9utZtFavqwrbPIewIjxPkAGd3NTT91kJh/iPcASk4U/1RiHbpi6U17niR8IRkNYOxh7ZB+HhMfbrEaESjoDcaXmfuepStRwAe/bbrUeEjv8BqXw+1Kpmt47l/9SL+YQ4hf8BcbGVdsI8+3WIUPI/ILZnzjOz9K5AIQrhf0Aaptstf85SyJfXuqJwfgekRAm4oobdOuYtt1u+CDW/A5JWze4B1Pu+loMLhJHfAal9sd3yl6yX7pUw8jsgl1W1W/7KTXbLF6Hnd0DSLD9BFsvchzDzezXvpRfZK3t/Dnz4mb3ybapTE37dAkqVDLolhcs+qF+fqz9f9ZQO4hjWOPE7IBdWsFf2Pzbqw9XCaPqTcMWlQbciMuqLaMC40E7G+t3Fqphqr+wNW+2VbdN9LcITDuWCc+HPA+CTV6HT7UG3Jmp+B6SyxWNFw3Aq4qmqVgr+oO7iqlkFJv8epj+h75AMCX8DUuFcfd+gLWHc9zGkG5x7dtCtiE3bW/VFRyEJib8BOdvyH2DYlrY3vRo6ODy0wqbLq+uLVkPA34DY/IbJzYMjefbKj7e6aTD3KX/fWhXHPbfo8ZTn/A2IGtzZEraTzUf00DdpJZrHugTdgiL5GxChdWmh7yBMRNUvhPZ+dxv9DUiexcml0iHpqlRMhSFdg26FXXf7fW23vwH54it7ZZcPwZug8uVg6Tg3Z4EF6ZeN9KGAnvI3ILa5OEYoFn3bhmtCsLjOLWd/z08M/A3ILssXvVx4gd3yY6HC2/feoFvhzuWXBN2C0/I3IAUFetGbLba38sZi4sDwTwhGw+M3dP4GhO93/NlyVU17ZceiZys9KSi84HdA9ufYK/vaOvbKLq4ypWDU74JuhXu2u9Mx8Dsg2z+3V3ady6DSefbKj1bJFHjtKa+7G9a87+/Kar8DsuMLu+U3qW+3/GgM7Jy4E4Immfsg+1DQrTgtzwOSabf8xg5ObYxUF//XJVnx2Z6gW2Dk7wyN8tEuu+VfX89u+dFoOxiqWNxBWVx1a8GgzvbK/8jvOyD9DsjGj+FYPqScaaf8RulwyYWw80s75UfD1xNWzitvt3zPN6753cU6kme/m9XiF3bLD7MypeDJ++3WkbHdbvkx8jsgygfb7Jbf8ka75YfZIx3tvukrKLD/9xsj/wNi+2jQGxpAur9rgQJTNw0GWr4XctMnXr/BIhQBWZ1hv47Oze3XETYjetjfwbjC03HXSfwPyL+2Q47lHYCdmkNqEq19KkqPlm7mZFx8+cXI/4AcPQZvrrRbh+pnT3tCX7eQ7G5tDGP726/nWD68/p79emLkf0CUuQ7u8Gh+rXS1ypfTK4ldUGPLHL/HH4QmIIvW6G8c2x7vZvcsLt/1betuB+Oi1W7qiVE4Pg0HvoEZi+zXoz4cfdrYr8dH6TXcbtKa9w93dcUgHAFRBo3X51nZNrQ73PRz+/X4pGolvf/d1SatmW/Dx5aXEcVJeAKyex8s3WC/nrNKw7w/QjXP96zH05Bubpf+Pz7RXV0xCk9AlGlvuann7LIwabDXp23ETd00t0eaLvsnbPV7geLJwhWQ2YvhS4vHAZ3s5oYw7mE3dQWlTCmYPNjtkaajZ7qrKw7CFZDco/DMDHf1db0D/v40nGfxpt2gnNjBWK+WuzrVuMPFK/s4CldAlInz3B483fw6mDrEXX2udLjN/Q7GCfNCd6tX+AKSfQgeHeu2ThWS5/slzkx7+XLujzTdnwNTFritMw7CFxBl9CvuF7r1ag1zRsD5ljcQufB0H7dHmhYUQJtBkJXtrs44CWdAlJHT3Nd5VxPYPMPfM7UikV5Dj61cWrACloTzyu3wBuTv7+ktua795AJYMja8G62ecXzHoXp6jHjZbZ1xFN6A5BdAz5H6L8C1Cqkwezgsf8Gvgx+KMuYh96c2vvwGrPyX2zrjKLwBUdQfvHp8B0WFQ4XE9s67eFDB6NnKbZ3qS2zQC27rjLNwB0R5dBx8ezjYNgztDmsm6Y1XZcsE25bClEzROwRdG/2K3XteHAh/QLZ8Cr/qB4dzg21Ho3Q9K71zLgzrDg1q+/NaeGBntxOCyuL1oX96KCWO0zgDuCLohsSsR0s3O+Gi8dmXMGux/rCs3QJff+O+DaprNX+k2+Uk6vfa5Lfhukm4cFmJExBl7SR/7/3IOwZvr4E57+pD4lws2KuYCjvm2L9z/mRq3PHzTrDR7+N8IpSVWMtVuw6DZeMh1cO1U6VS9Iy8+kdR46btmXry7EBOZJNoqzNg6sLI6xzWw204lFHTEiUc/5ZYAdn0CVzTFd4ZA1UqBt0as3Jn6SsYolEhNfKA3NrY/YTg83+DAePd1mlZ+Afpp1Jdl/uGBt2K+DuWD49FMeh1PSH46lLo/UzoFiMWJfECory12u2yeNsKCuD+EbBtd2Q/f18LtzfkfrwLuj/lrj6HEjMgykPPwcPPQ97RoFsSu/FzYNLrkf1seg29GNEV9cRu9kAoFyJGInEDoh71I/+qV5GGOSQ7MiNf3u/68IW5y6B+B/jU8k1gAUrcgJwwb3m4J6yGTIRDEa4UcHn4gnpytB2cCHMdRokfEOXp6TB2dtCtiJ76hp4e4UEVLg9fUGMO1a1K8HCQNAFR3a1eo6DNQPgqJH3ldVt09zA/gtXKLg9fmLUYru3mx61cDiRHQE6YtQSa9oEjAa/bikT/Mfrg7kiM/J2btVbqSaxCa/P+es8kV0D4/k68W3rrWWxfzV8OyyK8OOjWxno7sE3qKTZsMvR/3m49Hkq+gCjvfQC1WsOQCcFsuDLJzIL7I5xTcHEa+4pN+k3VoBcSbhIwEskZEL6ffHv8JegyNLJ+viutHoU9+yP7Wdunsb+5Cm7upS8xSlLJG5ATpiyA2/vC5h1BtwQ2bIXVmyP7WZunsecdg+FT4K6Hk+JNlUliLXePVftmMKo3VD7ffd07MqHhr/VVD0WpWgk2TIn/nId6qo6fA/87CfYciG/Z4ZQlT5CTTXsTLm+jZ65373VXr/pgdh0WWTgUNe6IZziO5evFho266NfhEo7/kICcKvsQPDUV6rSD1x1d8rJgReRXOzS9Or4nk6jxTpPfQqsBuosnfkS6WCYlSkCT+tD1TrjnZkg5M/51fHtYf3Nv+bTony2ZondNxmPOI2O77k5Nf8v7u8oDlGBbbm2qcRH0bgPtmkLFOHVvcvP0ko13I5zz+EPX2M7UzS+AJevgmZl6S0ASvraNkgSkWDo1h5G9Yg/K2Nm6zx+J6hfChzOhTOno61HBmDQfhk3RB0mISElAik19UFX36/ZroOVN0W/xVQPyK9pGNudRvhysnBDdJqjDubBwlb4heOFK2OXwpUPikIDEzc8uh1/UhevqQJMGRb9l6jBEvzWLxISBRe8vzzsK6z6ENRn6mrMl6yNfJi9ORwJijeoSXXkp1K8NtS+BWtUgrZq+JHT4y5FfZHlLI1j03A//WwVh5x695Hx7pl5btmWHPrAiN8Qbw/wkAfFevTS4tg58kaUDsXVn5Kt8RawkIEIYyEy6ECYSECEMJCBCGEhAhDCQgAhhIAERwkACIoSBBEQIAwmIEAYSECEMJCBCGEhAhDCQgAhhIAERwkACIoSBBEQIAwmIEAYSECEMJCBCGEhAhDCQgAhhIAERwkACIoSBBEQIAwmIEAYSECEMJCBCGEhAhDCQgAhhIAERwkACIoSBBEQIAwmIEAYSECEMJCBCGEhAhDCQgAhh8H8BAAD//0zFZLJkv3e9AAAAAElFTkSuQmCC"
  },
  "description": "",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "GROUP",
    "name": "Default consent",
    "displayName": "Default consent settings",
    "groupStyle": "ZIPPY_OPEN_ON_PARAM",
    "subParams": [
      {
        "type": "LABEL",
        "name": "defaultConsentDescription",
        "displayName": "Below you can select which consent settings that should be default for your users. The rules concerning this might differ depending on your country but our recommendation is that you leave these as they are if you don\u0027t know what to select."
      },
      {
        "type": "SELECT",
        "name": "generalConsent",
        "displayName": "General (functional_storage and personalization_storage)",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "denied",
            "displayValue": "Denied"
          },
          {
            "value": "granted",
            "displayValue": "Granted"
          }
        ],
        "simpleValueType": true
      },
      {
        "type": "SELECT",
        "name": "analyticsStorage",
        "displayName": "Statistics (analytics_storage)",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "denied",
            "displayValue": "Denied"
          },
          {
            "value": "granted",
            "displayValue": "Granted"
          }
        ],
        "simpleValueType": true
      },
      {
        "type": "SELECT",
        "name": "adStorage",
        "displayName": "Marketing (ad_storage)",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "denied",
            "displayValue": "Denied"
          },
          {
            "value": "granted",
            "displayValue": "Granted"
          }
        ],
        "simpleValueType": true
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const setDefaultConsentState = require('setDefaultConsentState');
const updateConsentState = require('updateConsentState');
const callInWindow = require('callInWindow');
const createQueue = require('createQueue');

// Set default consent state based on user settings
setDefaultConsentState({
  'functional_storage': data.generalConsent,
  'personalization_storage': data.generalConsent,
  'analytics_storage': data.analyticsStorage,
  'ad_storage': data.adStorage,
  'security_storage': 'granted'
});

const updatedConsents = callInWindow('gCookiesInit');

if (updatedConsents) {
  updateConsentState(updatedConsents);
  
  // Used with products that does not have native support to consent in GTM
  const dataLayerPush = createQueue('dataLayer');
  dataLayerPush( {
    'event': 'g_cookies_consent_updated'
  } );
}

data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "functional_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "personalization_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "security_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "gCookiesInit"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "dataLayer"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 2021-07-16 15:25:27


